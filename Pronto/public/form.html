<html>
<head>
   <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
   <script>

      var cart = [];
      var tmp = [];

      function add(val1, val2){
         tmp.push(val2,val1);
      }

      function addQuant(val1,val2){
         tmp.push(val1);
         addCart(val2)

      }

      function addCart(val){
         cart.push({ val : tmp});
         tmp = [];
      }


      function onSubmit() {
         $.ajax({
            type: 'POST',
            data: JSON.stringify(cart),
            contentType: 'application/json',
            url: '/process_post'
         });


      }

   </script>
</head>
<body>

<form action=# method = "POST">
   <input type="checkbox" name="plat1" value="steak" onclick="add(this.value, this.name)" > Steak<input type="number" name="plat1" onchange="addQuant(this.value, this.name)"> <br>
   <input type="checkbox" name="plat2" value="poisson" onclick="add(this.value, this.name)" > Poisson<input type="number" name="plat2" onchange="addQuant(this.value, this.name)"><br>
   <input type="checkbox" name="plat3" value="pâtes"  onclick="add(this.value, this.name)" > Pâte<input type="number" name="plat3" onchange="addQuant(this.value, this.name)"><br>
   <input type="checkbox" name="plat4" value="tomate" onclick="add(this.value, this.name)" > Tomate<input type="number" name="plat4" onchange="addQuant(this.value, this.name)"><br>
   <input type="submit" value="Submit" onclick="onSubmit()">
</form>

</body>
</html>


